/*! scripts/pre_tumblelog.js */
(function(){var a=translated_warning_string;var b=function(d){d=d||window.event;var c=d.target||d.srcElement;if(c.type=="password"){if(confirm(a)){b=function(){}}else{c.value="";return false}}};if(typeof document.addEventListener!="undefined"){document.addEventListener("keypress",b,true)}})();(function(){if(typeof(function(){}).bind!="function"||typeof XMLHttpRequest.prototype.addEventListener!="function"){return}if(typeof __pbpa=="undefined"||__pbpa===false){return}var j={};var k=document.createElement("a");var h=function(){if(typeof __pbpm!="undefined"&&__pbpm===false){return}try{var v=parseInt(this.getResponseHeader("X-Tumblr-Pixel"));if(!v){return}var q,u="";for(var t=0;t<v;t++){q=this.getResponseHeader("X-Tumblr-Pixel-"+t);if(!q){return}u+=q}var s,x=u.split("--");x.forEach(function(y){y+="&A=1";s=new Image(1,1);s.src=(r=y.replace(/&R=[^&$]*/,""))+("&R="+escape(document.referrer)).substr(0,2000-r.length).replace(/%.?.?$/,"")})}catch(w){}return true};var m=false;var n=[];var p=window.addEventListener?"addEventListener":"attachEvent";var i=window[p];var e=p=="attachEvent"?"onmessage":"message";i(e,function(s){var q=(s.data&&s.data.split)?s.data.split(";"):"";if(q[0]=="analytics_iframe_ga_non_ajax_received"){m=true}},false);function g(t,s){n.push(s);if(m){while(n.length){var q=n.pop();t.contentWindow.postMessage(q,t.src.split("/analytics.html")[0])}}}var b=function(){var u=document.getElementById("ga_target");if(!u){return true}var t="/";if(typeof this.called_url!="undefined"){t=this.called_url}k.href=t;t=k.href;var s="unknown_ajax_blog_route";if(k.pathname.match(/^\/page/)){s="/page/:page"}if(k.pathname.match(/^\/api\/read\/json/)){s="/api/read/json"}try{var q=true;var v=["tick_google_analytics",q,t,s].join(";");g(u,v);if(typeof COMSCORE!="undefined"){var x="tick_comscore;"+t;g(u,x)}}catch(w){}return true};var f=function(){try{if(window._qevents&&window.__qc){__qc.qpixelsent=[];_qevents.push({qacct:"p-19UtqE8ngoZbM"})}}catch(q){}return true};var a=function(){return true};var d=function(q){k.href=q;var s=k.pathname;if(!s.match(/^\/page\/[0-9]+\/?$/)&&!s.match(/^\/api\/read\/json$/)){return false}if(j[s]){return false}j[s]=1;return true};var l=XMLHttpRequest.prototype.send;var c=XMLHttpRequest.prototype.onCreate;XMLHttpRequest.prototype.send=function(q){if(d(this.called_url)){this.addEventListener("load",h.bind(this),true);this.addEventListener("load",b.bind(this),false);this.addEventListener("load",f.bind(this),false);this.addEventListener("load",a.bind(this),false)}(l.bind(this))(q)};var o=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(q,t,s){this.called_url=t;(o.bind(this))(q,t,s)}})();(function(){if(window.location.hash==="#_=_"){if(window.history&&window.history.replaceState){history.replaceState("",document.title,window.location.pathname+window.location.search)}else{window.location.hash=""}}})();